rules:
    - processor: combine_budget_jsons
      input:
          - financial_report/2000-2008/out.json
          - history_neto/history.json
          - queries/out.json
          - full_titles/out.json
          - data/budgets.jsons
          - connections/budget_equivalents.jsons
      output: budgets.jsons
    - processor: aggregate_jsons_by_key
      input:
          - budgets.jsons
          - ../changes/budget_changes.jsons
      output: budgets.aggregated-jsons
      params:
          key_fields:
              - year
              - code
    - processor: dump_to_db
      input: budgets.aggregated-jsons
      output: budget.sqlite
      params:
          key_fields:
              - year
              - code
    - processor: upload
      input: budget.sqlite
      output: budget.upload
      params:
          kind: bl
